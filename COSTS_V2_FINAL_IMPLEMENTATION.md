# ๐ฏ ุชุทุจูู ุตูุญุฉ ุงูุชูุงููู V2 - ุงูุชุนุฏููุงุช ุงูุฃุฎูุฑุฉ

## ๐ ุงูููุฎุต

ุชู ุชูููุฐ ุฌููุน ุงูุชุญุณููุงุช ุงููุทููุจุฉ ูุถูุงู ุฏูุฉ ุญุณุงุจุงุช ุงููุตูุน ูุชูููุฑ ุฑุคูุฉ ุดุงููุฉ ุนู ุชูููุฉ ุงูููุชุฌุงุช.

---

## โจ ุงูุชุญุณููุงุช ุงููููุฐุฉ

### 1๏ธโฃ ุฏูุฉ ุงูุฃุฑูุงู ุงูุนุดุฑูุฉ ๐ข

**ุงููุดููุฉ**: ูุงู ุญูู ุงููููุฉ ููุจู ููุท 0.001 (ุซูุงุซ ุฃุฑูุงู ุนุดุฑูุฉ)

**ุงูุญู**: ุชุบููุฑ ุฅูู `step="0.0001"` ูุฏุนู:
- 4 ุฃุฑูุงู ุนุดุฑูุฉ
- ุฅุฏุฎุงู ุงูุฌุฑุงูุงุช ูุฃุฌุฒุงุก ูู ุงููููู
- ูุซุงู: 2 ุฌุฑุงู = 0.002 ูููู

**ุงูุชุทุจูู**:
- โ ูู ุญููู ุงูููููุงุช (Ingredient rows)
- โ ูู ุญูู ุงููููุฉ ุงููุงุชุฌุฉ (Expected Yield)

---

### 2๏ธโฃ ุญูู ุงููููุฉ ุงููุงุชุฌุฉ ุงููุชููุนุฉ ๐ฆ

**ุงููููุน**: ูููุฐุฌ ุงููุตูุฉ (Recipe Form) - ูู ุงูุฃุนูู

**ุงูุฎุตุงุฆุต**:
- **ID**: `cv2-rec-expected-yield`
- **Type**: `number`
- **Step**: `0.0001`
- **Required**: `true` โ
- **Placeholder**: `770`
- **ุงูุญุฏุซ**: ูุณุชุฏุนู `calcRecipeTotal()` ุนูุฏ ุงูุชุบููุฑ

**ุงูุบุฑุถ**: 
- ุฅุฏุฎุงู ุนุฏุฏ ุงููุญุฏุงุช ุงููุชููุน ุฅูุชุงุฌูุง
- ูุซุงู: 770 ููุจ ูู ุงูุฒุจุงุฏู

---

### 3๏ธโฃ ูุนุงุฏูุฉ ุชูููุฉ ุงููุญุฏุฉ ุงููุงุญุฏุฉ โ๏ธ

**ุงููุนุงุฏูุฉ**:
```javascript
unitCost = (totalCost + overhead) / expectedYield
```

**ูุซุงู ุนููู**:
```
ุฅุฌูุงูู ุงูุชูููุฉ = 606.90 ุฌ.ู
ูุตุงุฑูู ุงูุชุดุบูู = 0.00 ุฌ.ู
ุงููููุฉ ุงููุงุชุฌุฉ = 770

ุชูููุฉ ุงูููุจ ุงููุงุญุฏ = 606.90 รท 770 = 0.7882 ุฌ.ู
```

**ูู ุงููุงุฌูุฉ**:
- ุนุฑุถ ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ ุจููู ุฃุฒุฑู
- ุนุฑุถ ุชูููุฉ ุงููุญุฏุฉ ุจููู ุฃุฎุถุฑ
- ุชุญุฏูุซ ููุฑู ุนูุฏ ุฃู ุชุบููุฑ

---

### 4๏ธโฃ ุญูุธ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ๐พ

#### ูู ูุณุชูุฏ ุงููุตูุฉ (recipes):
```javascript
{
  name: "ุงูุฒุจุงุฏู",
  unit: "ููุจ",
  expectedYield: 770,          // โจ ุฌุฏูุฏ
  unitCost: 0.7882,            // โจ ุฌุฏูุฏ
  estimatedCost: 606.90,
  overhead: 0,
  stdPrice: 1.50,
  ingredients: [...],
  createdAt: timestamp,
  updatedAt: timestamp
}
```

#### ูู ูุณุชูุฏ ุงูุชุดุบููุฉ (batches):
```javascript
{
  batchNumber: 1001,
  recipeId: "abc123",
  recipeName: "ุงูุฒุจุงุฏู",
  expectedYield: 770,          // โจ ุฌุฏูุฏ
  unitCost: 0.7882,            // โจ ุฌุฏูุฏ
  estTotalCost: 606.90,
  status: "active",
  createdAt: timestamp
}
```

---

## ๐งฎ ุญุงูุฉ ุงูุงุฎุชุจุงุฑ: ูุตูุฉ ุงูุฒุจุงุฏู

### ุงูููููุงุช:
| ุงููููู | ุงูููุน | ุงููููุฉ | ุงูุณุนุฑ/ุงููุญุฏุฉ | ุงูุฅุฌูุงูู |
|-------|-------|--------|------------|----------|
| ๐ฅ ูุจู | ุฎุงูุงุช | 100 | 6.00 | 600.00 |
| ๐ฆ ุฃููุงุณ | ุชุบููู | 770 | 0.00 | 0.00 |
| ๐ฆ ุฃุบุทูุฉ | ุชุบููู | 770 | 0.00 | 0.00 |
| ๐ฆ ูุฑุชููุฉ | ุชุบููู | 21 | 0.00 | 0.00 |
| ๐ง ุณูุฑุจุงุช | ุฎุงูุงุช | 0.002 | 3450 | 6.90 |

### ุงููุชูุฌุฉ ุงููุชููุนุฉ:
- **ุฅุฌูุงูู ุงูุชูููุฉ**: 606.90 ุฌ.ู
- **ุงููููุฉ ุงููุงุชุฌุฉ**: 770 ููุจ
- **ุชูููุฉ ุงูููุจ ุงููุงุญุฏ**: 606.90 รท 770 = **0.7882 ุฌ.ู** โ

---

## ๐ง ุงููููุงุช ุงููุนุฏูุฉ

### 1. `index.html`
- โ ุฅุถุงูุฉ ุญูู `cv2-rec-expected-yield`
- โ ุฅุถุงูุฉ ุนุฑุถ `cv2-rec-unit-cost` ูู ุงููุงุฌูุฉ
- โ ุชุญุณูู ุงูุชุฎุทูุท ููุนุฑุถ ุงูุชูููุชูู ูุนุงู

### 2. `js/costs-v2-integrated.js`
- โ ุชุญุฏูุซ `addIngredientRow()`: `step="0.0001"`
- โ ุชุญุฏูุซ `calcRecipeTotal()`: ุญุณุงุจ unitCost
- โ ุชุญุฏูุซ `saveRecipe()`: ุญูุธ expectedYield ู unitCost

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ุฎุทูุงุช ุฅูุดุงุก ูุตูุฉ ุฌุฏูุฏุฉ:

1. **ุงุถุบุท ุนูู "ูุตูุฉ ุฌุฏูุฏุฉ (BOM)"**
2. **ุฃุฏุฎู ุงุณู ุงูููุชุฌ** (ูุซูุงู: "ุงูุฒุจุงุฏู")
3. **ุงุฎุชุฑ ุงููุญุฏุฉ** (ูุซูุงู: "ููุจ")
4. **ุฃุถู ุงูููููุงุช**:
   - ุงุฎุชุฑ ุงูููุน (ุฎุงูุงุช/ุชุบููู)
   - ุงุฎุชุฑ ุงูุตูู ูู ุงููุงุฆูุฉ
   - ุฃุฏุฎู ุงููููุฉ ุจุฏูุฉ (0.0001)
   - ุณูุชู ุญุณุงุจ ุงูุชูููุฉ ุชููุงุฆูุงู
5. **ุฃุฏุฎู ุงูุชุดุบูู ุงูุฅุถุงูู** (ุฅู ูุฌุฏ)
6. **ุฃุฏุฎู ุงููููุฉ ุงููุงุชุฌุฉ ุงููุชููุนุฉ** (ูุซูุงู: 770)
7. **ุฑุงุฌุน ุงูุชูุงููู**:
   - ๐ต ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ (ุฃุฒุฑู)
   - ๐ข ุชูููุฉ ุงููุญุฏุฉ (ุฃุฎุถุฑ)
8. **ุงุถุบุท ุญูุธ ุงููุตูุฉ**

---

## ๐ ุงูููุงุฆุฏ

โ **ุฏูุฉ ุนุงููุฉ**: ุชุฏุนู 4 ุฃุฑูุงู ุนุดุฑูุฉ
โ **ุญุณุงุจุงุช ููุฑูุฉ**: ุชุญุฏูุซ ุชูููุฉ ุงููุญุฏุฉ ูู ุงููุงูุน
โ **ุชุฎุฒูู ูุงูู**: ุญูุธ ุฌููุน ุงูุจูุงูุงุช ููุชุญููู
โ **ุณูููุฉ ุงูุงุณุชุฎุฏุงู**: ูุงุฌูุฉ ุจุฏูููุฉ ููุงุถุญุฉ
โ **ูุงุจููุฉ ุงูุชูุณุน**: ุฌุงูุฒุฉ ููุชูุงุฑูุฑ ูุงูุชุญูููุงุช

---

## โ ูุงุฆูุฉ ุงูุชุญูู

- [x] ุฏูุฉ ุนุดุฑูุฉ 0.0001
- [x] ุญูู Expected Yield
- [x] ูุนุงุฏูุฉ ุชูููุฉ ุงููุญุฏุฉ
- [x] ุนุฑุถ ููุฑู ูู ุงููุงุฌูุฉ
- [x] ุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- [x] ุงุฎุชุจุงุฑ ุงูุญุณุงุจุงุช
- [x] ุชูุซูู ุดุงูู

---

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ูุธุงู ูุชูุงูู ูุญุณุงุจ ุชูุงููู ุงูุฅูุชุงุฌ ุจุฏูุฉุ ูููุฑ ุฑุคูุฉ ุดุงููุฉ ุนู:
- ุชูููุฉ ูู ูุญุฏุฉ ููุชุฌ
- ูุงูุด ุงูุฑุจุญ ุงููุชููุน
- ุฅููุงููุฉ ุงูููุงุฑูุฉ ุจูู ุงููุตูุงุช
- ุจูุงูุงุช ููุซููุฉ ููุชูุงุฑูุฑ ูุงูุชุญูููุงุช
