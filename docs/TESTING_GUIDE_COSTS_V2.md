# ๐งช ุฏููู ุงูุงุฎุชุจุงุฑ ุงูุณุฑูุน - ูุธุงู ุชูุงููู ุงูุฃูุจุงู V2

## โ ุงูุงุฎุชุจุงุฑุงุช ุงููุทููุจุฉ ุจุนุฏ ุงูุชุญุฏูุซ

---

## 1๏ธโฃ ุงุฎุชุจุงุฑ ูุธุงู ุงูุฅูุฑุงุฏุงุช ุงูุญููููุฉ

### ุงูุฎุทูุงุช:
1. ุงูุชุญ ุงููุธุงู ูู ุงููุชุตูุญ
2. ุงูุชูู ุฅูู ุตูุญุฉ **Costs V2**
3. ุงุถุบุท ุนูู ุชุจููุจ **Reports (ุงูุชูุงุฑูุฑ)**
4. ุงูุชุญ **Console** ูู DevTools (F12)
5. **ุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก**:
   - โ ูุง ูุฌุจ ุฃู ุชุฑู: `ReferenceError: initSalesRevenueListener is not defined`
   - โ ูุฌุจ ุฃู ุชุนูู ุงูุชูุงุฑูุฑ ุจุฏูู ุฃุฎุทุงุก

### ุงููุชูุฌุฉ ุงููุชููุนุฉ:
- ุฌุฏูู ุงูุชูุงุฑูุฑ ูุธูุฑ ุจุดูู ุตุญูุญ
- ุงูุฃุนูุฏุฉ: ุฑูู ุงูุชุดุบููุฉุ ุงูุงุณูุ ุชูููุฉ ุงููุญุฏุฉุ ุงููููุฉุ ุงูุฅูุฑุงุฏุ ุงูุชูููุฉุ ุงูุฑุจุญุ ุงููุณุจุฉ%
- ุงูุฅูุฑุงุฏ ุงูุญูููู ููุญุณุจ ูู ูุฌููุนุฉ `sales`
- ุงูุฑุจุญ ุงูุตุงูู = ุงูุฅูุฑุงุฏ ุงููุนูู - ุชูููุฉ ุงูุฅูุชุงุฌ

---

## 2๏ธโฃ ุงุฎุชุจุงุฑ ุงูุชุญุฏูุซ ุงูุชููุงุฆู ููุชูุงุฑูุฑ

### ุงูุฎุทูุงุช:
1. ุงูุชุญ ุตูุญุฉ **Reports** ูู ูุงูุฐุฉ ุงููุชุตูุญ
2. ุงูุชุญ ุตูุญุฉ **Sales** ูู ูุงูุฐุฉ ุฃุฎุฑู (ุฃู tab ุฌุฏูุฏ)
3. ูู ุตูุญุฉ Salesุ ุฃุถู ูุงุชูุฑุฉ ุฌุฏูุฏุฉ ูููุชุฌ ููุฌูุฏ ูู ุชุดุบููุฉ ูุบููุฉ:
   - ูุซูุงู: ุจูุน 10 ูุทุน ูู "ุฒุจุงุฏู" ุจุณุนุฑ 50 ุฌ.ู
4. ุจุนุฏ ุญูุธ ุงููุงุชูุฑุฉุ **ุนุฏ ุฅูู ุตูุญุฉ Reports**

### ุงููุชูุฌุฉ ุงููุชููุนุฉ:
- โ ูุฌุจ ุฃู ุชุชุญุฏุซ ุฃุฑูุงู ุงูุฅูุฑุงุฏ ูุงูุฑุจุญ **ุชููุงุฆูุงู** ุจุฏูู ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ
- ุฅุฐุง ูุงู ุงูุฅูุฑุงุฏ ูุจู ุงููุงุชูุฑุฉ: 1000 ุฌ.ู
- ุจุนุฏ ุฅุถุงูุฉ ูุงุชูุฑุฉ ุจูููุฉ 500 ุฌ.ู
- ูุฌุจ ุฃู ูุตุจุญ ุงูุฅูุฑุงุฏ: 1500 ุฌ.ู

---

## 3๏ธโฃ ุงุฎุชุจุงุฑ ุชูุงุตูู ุงูุชุดุบููุฉ (Batch Details)

### ุงูุฎุทูุงุช:
1. ูู ุตูุญุฉ **Reports**ุ ุงุถุบุท ุนูู ุฃู ุชุดุบููุฉ ููุชููุฉ
2. ูุฌุจ ุฃู ุชูุชุญ ุตูุญุฉ **ุชูุงุตูู ุงูุชุดุบููุฉ**

### ุงููุชูุฌุฉ ุงููุชููุนุฉ:
- โ ุชุธูุฑ ุงูุจุทุงูุฉ ุงูุฑุฆูุณูุฉ:
  - ุงุณู ุงูููุชุฌ
  - ุฑูู ุงูุชุดุบููุฉ
  - ุชูููุฉ ุงููุญุฏุฉ
- โ ุงูุจุทุงูุฉ ุงูุฅุญุตุงุฆูุฉ ุชุญุชูู:
  - **ุงููููุฉ (Yield)**: ุงููููุฉ ุงูููุชุฌุฉ ุงููุนููุฉ
  - **ุงูุชูููุฉ**: ุชูููุฉ ุงูุฅูุชุงุฌ ุงููููุฉ
  - **ุงูุฅูุฑุงุฏ (ูุนูู)**: ูู ุงููุจูุนุงุช ุงูุญููููุฉ
  - **ุงูุฑุจุญ ุงูุตุงูู**: ุฅูุฑุงุฏ - ุชูููุฉ
- โ ุฌุฏูู ุณุฌู ุงููุจูุนุงุช (ุฅุฐุง ูุงู ููุงู ูุจูุนุงุช ูุณุฌูุฉ ูู `batch_sales_v2`)

---

## 4๏ธโฃ ุงุฎุชุจุงุฑ ููุน ุงููุญุฏุฉ (Unit Type) ูู Settings

### ุงูุฎุทูุงุช:
1. ุงูุชุญ ุตูุญุฉ **Settings**
2. ุงูุชูู ุฅูู ูุณู **Products (ุงูููุชุฌุงุช)**
3. ุงุถุบุท ุนูู ุฒุฑ **ุชุนุฏูู** ุฃู **ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ**
4. ูู ุงููุงูุฐุฉ ุงูููุจุซูุฉ (Modal):
   - ุงุจุญุซ ุนู ุญูู **"ููุน ุงููุญุฏุฉ"**
   - ูุฌุจ ุฃู ูุญุชูู ุนูู ุฎูุงุฑูู:
     - โ **ููุฒูู (ูููู ุฌุฑุงู)** - ูุณูุญ ุจุงููุณูุฑ
     - โ **ูุนุจุฃ (ูุทุนุฉ)** - ุฃุฑูุงู ุตุญูุญุฉ ููุท
5. ุงุฎุชุฑ ููุนุงู (ูุซูุงู: ููุฒูู)
6. ุงุญูุธ ุงูููุชุฌ
7. ุฃุนุฏ ูุชุญ ููุณ ุงูููุชุฌ ููุชุนุฏูู

### ุงููุชูุฌุฉ ุงููุชููุนุฉ:
- โ ุญูู "ููุน ุงููุญุฏุฉ" ููุฌูุฏ ูู Modal ุงูููุชุฌ
- โ ุนูุฏ ุฅุนุงุฏุฉ ูุชุญ ุงูููุชุฌุ ูุธูุฑ ุงูุงุฎุชูุงุฑ ุงูุตุญูุญ ุงูุฐู ุญูุธุชู
- โ ุชุธูุฑ ุฑุณุงูุฉ ูุฌุงุญ: "ุชู ุญูุธ ุงูููุชุฌ ูู ุงูุณุญุงุจุฉ"
- โ ูู console: ุฑุณุงูุฉ ุชุฃููุฏ ุงููุฒุงููุฉ:
  ```
  ๐ฐ ๐ก Price Update Synced: [code] - [name] = [price] (Unit: [unitType])
  ```

---

## 5๏ธโฃ ุงุฎุชุจุงุฑ ุญุณุงุจ ุชูููุฉ ุงููุญุฏุฉ ูู ุงููุตูุฉ

### ุงูุฎุทูุงุช:
1. ุงูุชุญ ุตูุญุฉ **Costs V2**
2. ุงุถุบุท ุนูู **Recipes (ุงููุตูุงุช)**
3. ุงุถุบุท **+ ุฅุถุงูุฉ ูุตูุฉ ุฌุฏูุฏุฉ**
4. ุฃุถู ููููุงุช (ุฎุงูุงุช/ุชุบููู) ุจูููุงุช:
   - ูุซูุงู: ุญููุจ 100 ูุฌู ร 15 ุฌ.ู = 1500 ุฌ.ู
   - ุณูุฑ 10 ูุฌู ร 20 ุฌ.ู = 200 ุฌ.ู
   - ุชุบููู 100 ูุทุนุฉ ร 2 ุฌ.ู = 200 ุฌ.ู
5. ุฃุถู **ุงููุตุฑููุงุช ุงูุฅุถุงููุฉ**: 100 ุฌ.ู
6. ูู ุญูู **"Expected Yield (ุงูุฅูุชุงุฌ ุงููุชููุน)"**: ุฃุฏุฎู 770
7. ุฑุงูุจ ุญูู **"ุชูููุฉ ุงููุญุฏุฉ"**

### ุงููุชูุฌุฉ ุงููุชููุนุฉ:
- โ ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ: 1500 + 200 + 200 + 100 = 2000 ุฌ.ู
- โ ุชูููุฉ ุงููุญุฏุฉ = 2000 / 770 = **2.5974 ุฌ.ู**
- โ ูุชู ุนุฑุถ ุชูููุฉ ุงููุญุฏุฉ ูู ุงูููุช ุงููุนูู ุนูุฏ ุชุบููุฑ ุฃู ูููุฉ
- โ ุนูุฏ ุญูุธ ุงููุตูุฉุ ูุชู ุชุฎุฒูู `expectedYield` ู `unitCost` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

## 6๏ธโฃ ุงุฎุชุจุงุฑ ุญูุธ ุงูุชุดุบููุฉ ูุน Expected Yield

### ุงูุฎุทูุงุช:
1. ุจุนุฏ ุฅูุดุงุก ูุตูุฉ (ููุง ูู ุงูุงุฎุชุจุงุฑ ุงูุณุงุจู)
2. ุงููุธุงู **ุชููุงุฆูุงู** ููุดุฆ ุชุดุบููุฉ ุฌุฏูุฏุฉ
3. ุงูุชูู ุฅูู ุชุจููุจ **Batches (ุงูุชุดุบููุงุช)**
4. ูุฌุจ ุฃู ุชุฑู ุงูุชุดุบููุฉ ุงูุฌุฏูุฏุฉ ูู ูุณู **"ุงูุชุดุบููุงุช ุงููุดุทุฉ"**
5. ุงุถุบุท ุนูู **"ุฅููุงุก ุงูุฅูุชุงุฌ"**
6. ุฃุฏุฎู:
   - **ุงูุชูููุฉ ุงููุนููุฉ**: 2050 ุฌ.ู (ูุฏ ุชุฎุชูู ุนู ุงูููุฏุฑุฉ)
   - **ุงููููุฉ ุงููุนููุฉ**: 765 (ูุฏ ุชุฎุชูู ุนู ุงููุชููุนุฉ 770)
7. ุงุญูุธ

### ุงููุชูุฌุฉ ุงููุชููุนุฉ:
- โ ุชูููุฉ ุงููุญุฏุฉ ุงูููุงุฆูุฉ = 2050 / 765 = **2.6797 ุฌ.ู**
- โ ุงูุชุดุบููุฉ ุชูุชูู ุฅูู ูุณู **"ุงูุชุดุบููุงุช ุงูููุชููุฉ"**
- โ ุนูุฏ ุงูุถุบุท ุนูููุงุ ุชุธูุฑ ุงูุชูุงุตูู ุงููุงููุฉ

---

## 7๏ธโฃ ุงุฎุชุจุงุฑ ุฑุจุท ุงูุฅูุฑุงุฏ ุงูุญูููู ุจุงูุชุดุบููุฉ

### ุงูุฎุทูุงุช:
1. ูู ุตูุญุฉ **Sales**ุ ุฃุถู ูุงุชูุฑุฉ ุฌุฏูุฏุฉ:
   - ุงุฎุชุฑ ููุชุฌุงู ูุทุงุจู ุงุณู ูุตูุฉ ููุฌูุฏุฉ (ูุซูุงู: "ุฒุจุงุฏู")
   - ูููุฉ: 50
   - ุณุนุฑ: 10 ุฌ.ู
   - ุฅุฌูุงูู ุงููุงุชูุฑุฉ: 500 ุฌ.ู
2. ุงุญูุธ ุงููุงุชูุฑุฉ
3. ุงูุชูู ุฅูู **Costs V2 > Reports**
4. ุงุจุญุซ ุนู ุงูุชุดุบููุฉ ุงูุชู ุชุทุงุจู ุงูููุชุฌ "ุฒุจุงุฏู"

### ุงููุชูุฌุฉ ุงููุชููุนุฉ:
- โ ุนููุฏ **"ุงูุฅูุฑุงุฏ"** ูุฌุจ ุฃู ูุญุชูู ุนูู **500 ุฌ.ู** (ุฃู ูุฌููุน ุฌููุน ููุงุชูุฑ ูุฐุง ุงูููุชุฌ)
- โ ุนููุฏ **"ุงูุฑุจุญ ุงูุตุงูู"** = ุงูุฅูุฑุงุฏ - ุงูุชูููุฉ
- โ ุงููุณุจุฉ ุงููุฆููุฉ = (ุงูุฑุจุญ / ุงูุฅูุฑุงุฏ) ร 100
- โ **ุงูุชุญุฏูุซ ูุญุฏุซ ุชููุงุฆูุงู ุจุฏูู refresh**

---

## 8๏ธโฃ ุงุฎุชุจุงุฑ ุงููุฒุงููุฉ ูุน Stock Control

### ุงูุฎุทูุงุช:
1. ุงูุชุญ ุตูุญุฉ **Stock Control**
2. ุฃุถู ุฃู ุนุฏูู ููุชุฌ ุฎุงู (ูุซูุงู: ุญููุจ)
3. ุบููุฑ ุงูุณุนุฑ ูู 15 ุฌ.ู ุฅูู 18 ุฌ.ู
4. ุงุญูุธ
5. ุงูุชูู ุฅูู **Costs V2 > Prices (ุงูุฃุณุนุงุฑ)**

### ุงููุชูุฌุฉ ุงููุชููุนุฉ:
- โ ุงูุณุนุฑ ุงูุฌุฏูุฏ (18 ุฌ.ู) ูุธูุฑ **ุชููุงุฆูุงู** ูู ุฌุฏูู ุงูุฃุณุนุงุฑ
- โ ูู console: ุฑุณุงูุฉ ุชุฃููุฏ ุงููุฒุงููุฉ
- โ ุนูุฏ ุฅูุดุงุก ูุตูุฉ ุฌุฏูุฏุฉุ ููุณุชุฎุฏู ุงูุณุนุฑ ุงููุญุฏุซ

---

## ๐ ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ ูููููุฉ ุญููุง

### โ ุงูุฎุทุฃ: "initSalesRevenueListener is not defined"
**ุงูุณุจุจ:** ุฅุตุฏุงุฑ ูุฏูู ูู ุงูููุฏ
**ุงูุญู:** ุชุฃูุฏ ูู ุชุญุฏูุซ `js/costs-v2-integrated.js` ุจุงูุฅุตูุงุญ ุงูุฃุฎูุฑ

### โ ุงูุฅูุฑุงุฏุงุช ูุง ุชุชุญุฏุซ ุชููุงุฆูุงู
**ุงูุณุจุจ ุงููุญุชูู 1:** ูุดููุฉ ูู ุตูุงุญูุงุช Firestore
**ุงูุญู:** ุชุฃูุฏ ูู ุฃู ุงูููุงุนุฏ ุชุณูุญ ุจูุฑุงุกุฉ `sales` collection

**ุงูุณุจุจ ุงููุญุชูู 2:** ุงูููุงุชูุฑ ูุง ุชุญุชูู ุนูู `items[]`
**ุงูุญู:** ุชุฃูุฏ ูู ุฃู ุงูููุงุชูุฑ ุชูุญูุธ ุจุชูุณูู ุตุญูุญ ูุน `items` array

### โ ุชูููุฉ ุงููุญุฏุฉ = 0 ุฃู Infinity
**ุงูุณุจุจ:** `expectedYield` = 0 ุฃู ุบูุฑ ูุญุฏุฏ
**ุงูุญู:** ุชุฃูุฏ ูู ุฅุฏุฎุงู ูููุฉ ูู ุญูู "Expected Yield" ุนูุฏ ุฅูุดุงุก ุงููุตูุฉ

---

## ๐ ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ

- [ ] ูุธุงู ุงูุฅูุฑุงุฏุงุช ูุนูู ุจุฏูู ุฃุฎุทุงุก ูู console
- [ ] ุงูุชูุงุฑูุฑ ุชุนุฑุถ ุฃุฑูุงูุงู ุญููููุฉ ูู `sales`
- [ ] ุงูุชุญุฏูุซ ุงูุชููุงุฆู ูุนูู ุนูุฏ ุฅุถุงูุฉ ููุงุชูุฑ ุฌุฏูุฏุฉ
- [ ] ุชูุงุตูู ุงูุชุดุบููุฉ ุชุนุฑุถ ุงูุฅูุฑุงุฏ ูุงูุฑุจุญ ุงูุตุญูุญ
- [ ] ููุน ุงููุญุฏุฉ ููุญูุธ ููููุฑุฃ ุจุดูู ุตุญูุญ ูู Settings
- [ ] ุชูููุฉ ุงููุญุฏุฉ ุชูุญุณุจ ุชููุงุฆูุงู ูู Expected Yield
- [ ] ุงูุชุดุบููุงุช ุงููุบููุฉ ุชูุญูุธ ูุน `expectedYield` ู `unitCost`
- [ ] ุงููุฒุงููุฉ ูุน Stock Control ุชุนูู ุจุดูู ุตุญูุญ

---

## ๐ ููุงุญุธุงุช ุฅุถุงููุฉ

### ุงูุชูููุช ุงููุชููุน ููุงุฎุชุจุงุฑ
- **ุงูุงุฎุชุจุงุฑ ุงููุงูู:** ~15-20 ุฏูููุฉ
- **ุงูุงุฎุชุจุงุฑ ุงูุณุฑูุน:** ~5 ุฏูุงุฆู (ุงุฎุชุจุงุฑุงุช 1ุ 2ุ 5 ููุท)

### ุงูุจูุงูุงุช ุงููุทููุจุฉ ููุงุฎุชุจุงุฑ
- ููุชุฌ ุชุงู ูุงุญุฏ ุนูู ุงูุฃูู (ูุซูุงู: ุฒุจุงุฏู)
- ุฎุงูุงุช (ูุซูุงู: ุญููุจุ ุณูุฑ)
- ุชุบููู (ูุซูุงู: ุฃููุงุณ)
- ูุงุชูุฑุฉ ุจูุน ูุงุญุฏุฉ ุนูู ุงูุฃูู

---

**ุชู ุงูุชุญุฏูุซ:** 2025  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุงุฎุชุจุงุฑ
